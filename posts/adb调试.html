<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>syf5sssss</title><meta name="description" content="学习笔记">
    <link rel="preload" href="/assets/style-BhOYgqmK.css" as="style"><link rel="stylesheet" href="/assets/style-BhOYgqmK.css">
    <link rel="modulepreload" href="/assets/app-D2t_-etO.js"><link rel="modulepreload" href="/assets/adb调试.html-BQgKXAYy.js">
    <link rel="prefetch" href="/assets/get-started.html-D2FigKOW.js" as="script"><link rel="prefetch" href="/assets/index.html-CseMiZiZ.js" as="script"><link rel="prefetch" href="/assets/archive1.html-Cg5gQM_3.js" as="script"><link rel="prefetch" href="/assets/archive2.html-DkzLbb13.js" as="script"><link rel="prefetch" href="/assets/article1.html-BAhirVEh.js" as="script"><link rel="prefetch" href="/assets/article10.html-CMWK8sap.js" as="script"><link rel="prefetch" href="/assets/article11.html-Cf9rrN1B.js" as="script"><link rel="prefetch" href="/assets/article12.html-BIJQWYUu.js" as="script"><link rel="prefetch" href="/assets/article2.html-BzR8EOJ8.js" as="script"><link rel="prefetch" href="/assets/article3.html-CTTzZDxe.js" as="script"><link rel="prefetch" href="/assets/article4.html-B_R-W2-C.js" as="script"><link rel="prefetch" href="/assets/article5.html-CgUJC2aU.js" as="script"><link rel="prefetch" href="/assets/article6.html-BaDnhnz2.js" as="script"><link rel="prefetch" href="/assets/article7.html-C9UlfW87.js" as="script"><link rel="prefetch" href="/assets/article8.html-BEE3GLug.js" as="script"><link rel="prefetch" href="/assets/article9.html-BDIIZPWL.js" as="script"><link rel="prefetch" href="/assets/sticky.html-BA1zp9mq.js" as="script"><link rel="prefetch" href="/assets/sticky2.html-Dws11Ou-.js" as="script"><link rel="prefetch" href="/assets/404.html-BtAveP91.js" as="script"><link rel="prefetch" href="/assets/index.html-GjaFyu_5.js" as="script"><link rel="prefetch" href="/assets/index.html-G_fF2ymB.js" as="script"><link rel="prefetch" href="/assets/index.html-C_Uw2eML.js" as="script"><link rel="prefetch" href="/assets/index.html-DNo3i7v4.js" as="script"><link rel="prefetch" href="/assets/index.html-3Nni0-z2.js" as="script"><link rel="prefetch" href="/assets/index.html-jrsYqnXl.js" as="script"><link rel="prefetch" href="/assets/index.html-nwFpZsvY.js" as="script"><link rel="prefetch" href="/assets/index.html-Cd8eb9qF.js" as="script"><link rel="prefetch" href="/assets/index.html-DZ_87Pbh.js" as="script"><link rel="prefetch" href="/assets/index.html-DlwH3m39.js" as="script"><link rel="prefetch" href="/assets/index.html-Ddwr7qQs.js" as="script"><link rel="prefetch" href="/assets/index.html-JD04Ob6X.js" as="script"><link rel="prefetch" href="/assets/index.html-DuTuRCbI.js" as="script"><link rel="prefetch" href="/assets/index.html-DpggE7OM.js" as="script"><link rel="prefetch" href="/assets/index.html-CjWJmBgd.js" as="script"><link rel="prefetch" href="/assets/index.html-1Mq2FxOv.js" as="script"><link rel="prefetch" href="/assets/index.html-BSpk5Ebl.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="https://vuejs.press/images/hero.png" alt="syf5sssss"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">syf5sssss</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="主页"><!--[--><!--[--><!--]--><!--]-->主页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/article/" aria-label="文章"><!--[--><!--[--><!--]--><!--]-->文章<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/category/" aria-label="类别"><!--[--><!--[--><!--]--><!--]-->类别<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/tag/" aria-label="标签"><!--[--><!--[--><!--]--><!--]-->标签<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/timeline/" aria-label="时间线"><!--[--><!--[--><!--]--><!--]-->时间线<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="主页"><!--[--><!--[--><!--]--><!--]-->主页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/article/" aria-label="文章"><!--[--><!--[--><!--]--><!--]-->文章<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/category/" aria-label="类别"><!--[--><!--[--><!--]--><!--]-->类别<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/tag/" aria-label="标签"><!--[--><!--[--><!--]--><!--]-->标签<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/timeline/" aria-label="时间线"><!--[--><!--[--><!--]--><!--]-->时间线<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><p>adb调试</p><p>连接同一个网络，打开电视的开发者模式，开启adb调试。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">//连接到电视 TV 设备</span>
<span class="line">adb connect your_tv_ip:5555</span>
<span class="line">//查看已连接的设备</span>
<span class="line">adb devices</span>
<span class="line">//</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 Android Studio 中选择调试设备</p><ul><li>打开 Android Studio，运行你的 TV 应用。</li><li>当弹出 “Select Deployment Target” 对话框时，选择你刚刚连接的电视 TV 设备</li></ul><p>开始调试</p><p>点击 Android Studio 中的 “Debug” 按钮，这样就能在电视 TV 设备上远程调试你的应用了。</p><p>注意事项</p><ul><li>要是连接失败，你可以尝试重新启动电视 TV 设备和 ADB 服务。在命令行中输入 <code>adb kill-server</code> 来停止 ADB 服务，接着输入 <code>adb start-server</code> 重新启动服务。</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">C:\Users\Administrator&gt;adb connect 192.168.0.101:5555</span>
<span class="line">&#39;adb&#39; 不是内部或外部命令，也不是可运行的程序</span>
<span class="line">或批处理文件。</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>检查 C:\Users\Administrator\AppData\Local\Android\Sdk\platform-tools目录下有无adb.exe文件</p><img src="/assets/2025-04-19-10-46-06-image-BpSGUuDx.png" title="" alt="" width="264"><p>添加地址到环境变量</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">C:\Users\Administrator&gt;adb version</span>
<span class="line">Android Debug Bridge version 1.0.41</span>
<span class="line">Version 35.0.2-12147458</span>
<span class="line">Installed as C:\Users\Administrator\AppData\Local\Android\Sdk\platform-tools\adb.exe</span>
<span class="line">Running on Windows 10.0.26100</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">C:\Users\Administrator&gt;adb connect 192.168.0.101:5555</span>
<span class="line">failed to authenticate to 192.168.0.101:5555</span>
<span class="line">//这里失败一次是因为电视弹出确认框，允许开发电脑调试操作，再试一次就可以了</span>
<span class="line">C:\Users\Administrator&gt;adb connect 192.168.0.101:5555</span>
<span class="line">already connected to 192.168.0.101:5555</span>
<span class="line"></span>
<span class="line">C:\Users\Administrator&gt;adb devices</span>
<span class="line">List of devices attached</span>
<span class="line">192.168.0.101:5555      device</span>
<span class="line">emulator-5554   device</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>make project 在项目的 <code>app/build/outputs/apk/debug</code> 目录下找到生成的 APK 文件(如果是 debug 版本),在当前目录下打开命令行</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">adb install app-debug.apk</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">D:\12_workspace\android_workspace\mitv01\app\build\outputs\apk\debug&gt;adb install app-debug.apk</span>
<span class="line">adb.exe: more than one device/emulator</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">D:\12_workspace\android_workspace\mitv01\app\build\outputs\apk\debug&gt;adb install app-debug.apk</span>
<span class="line">adb.exe: more than one device/emulator</span>
<span class="line"></span>
<span class="line">D:\12_workspace\android_workspace\mitv01\app\build\outputs\apk\debug&gt;adb devices</span>
<span class="line">List of devices attached</span>
<span class="line">192.168.0.101:5555      device</span>
<span class="line">emulator-5554   device</span>
<span class="line"></span>
<span class="line">//使用-s来指定设备安装</span>
<span class="line">D:\12_workspace\android_workspace\mitv01\app\build\outputs\apk\debug&gt;adb -s 192.168.0.101:5555 install app-debug.apk</span>
<span class="line">Performing Streamed Install</span>
<span class="line">Success</span>
<span class="line"></span>
<span class="line">D:\12_workspace\android_workspace\mitv01\app\build\outputs\apk\debug&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>应用安装成功后，可能由于某些原因未能正常启动或者在后台崩溃，从而导致在电视主屏幕上看不到应用图标。</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">2025-04-19 11:17:06.342 22227-22227 i.mitv.appstor          com.xiaomi.mitv.appstore             E  Failed to open APK &#39;/data/app/com.example.mitv01-ihXp-pH9MuFKjakJ23XOmw==/base.apk&#39; I/O error</span>
<span class="line">2025-04-19 11:17:06.342 22227-22227 ResourcesManager        com.xiaomi.mitv.appstore             E  failed to add asset path /data/app/com.example.mitv01-ihXp-pH9MuFKjakJ23XOmw==/base.apk</span>
<span class="line">//分析下来应该是io的报错，看看是不是没有存储相关的权限</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">     //AndroidManifest.xml 中声明必要权限</span>
<span class="line">    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</span>
<span class="line">    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;</span>
<span class="line">    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">PS D:\12_workspace\android_workspace\mitv01\app\build\outputs\apk\debug&gt; adb shell df /data</span>
<span class="line">Filesystem       1K-blocks   Used Available Use% Mounted on</span>
<span class="line">/dev/block/dm-38   6082144 839192   5100740  15% /data/user/0</span>
<span class="line">//这里剩余空间还有5个G，远大于标准的100M，可以确定安装失败和剩余空间没有关系</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ADB 安装成功但应用被禁用或未启用。</p><p>adb shell pm enable com.example.mitv01</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">PS D:\12_workspace\android_workspace\mitv01\app\build\outputs\apk\debug&gt; adb shell pm enable com.example.mitv01</span>
<span class="line">Package com.example.mitv01 new state: enabled</span>
<span class="line">PS D:\12_workspace\android_workspace\mitv01\app\build\outputs\apk\debug&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">//确保 ADB 连接时使用的是默认用户（用户 0）</span>
<span class="line">adb install --user 0 app-debug.apk</span>
<span class="line">//查看应用安装路径</span>
<span class="line">adb shell pm path com.example.mitv01</span>
<span class="line"># 正常输出示例：package:/data/app/~~xxxxx==/com.example.mitv01-xxxxx==/base.apk</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">//强制重启电视，保证刷新扫描新安装的应用</span>
<span class="line">adb reboot</span>
<span class="line">//查看电视系统版本</span>
<span class="line">PS D:\12_workspace\android_workspace\mitv01\app\build\outputs\apk\debug&gt; adb shell getprop ro.build.version.release</span>
<span class="line">14</span>
<span class="line">// targetSdkVersion 设置为 34（Android 14 对应的 API 级别是 34）</span>
<span class="line">//但是这里我犯了一个错误,没有指定设备</span>
<span class="line">PS D:\12_workspace\android_workspace\mitv01\app\build\outputs\apk\debug&gt; adb -s 192.168.0.101 shell getprop ro.build.version.release</span>
<span class="line">9</span>
<span class="line">//这下确定了电视的系统是Android9 API 28</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>//logcat界面居然也好心的提示了</p><img src="/assets/2025-04-19-12-40-55-image-Bdv43sPT.png" title="" alt="" width="303"><p>使用以下<code>adb</code>命令能获取到设备上所有已安装应用的包名</p><p>adb -s 192.168.0.101:5555 shell pm list packages</p><p><strong>获取用户安装的应用</strong>：</p><p>adb -s 192.168.0.101:5555 shell pm list packages -3</p><p>卸载应用</p><p>adb -s 192.168.0.101:5555 uninstall com.example.mitv01</p><p>安装应用</p><p>adb -s 192.168.0.101:5555 install -r -t .\app-release.apk</p><p>还是老问题</p><p>--------- beginning of system 2025-04-19 19:37:18.194 15072-15072 i.mitv.appstor com.xiaomi.mitv.appstore E Failed to open APK &#39;/data/app/com.example.mitv01-JocmQXgAAnVUIM45qXZpww==/base.apk&#39; I/O error 2025-04-19 19:37:18.194 15072-15072 ResourcesManager com.xiaomi.mitv.appstore E failed to add asset path /data/app/com.example.mitv01-JocmQXgAAnVUIM45qXZpww==/base.apk</p><p>//看看是否存在com.example.mitv01</p><p>PS D:\12_workspace\android_workspace\mitv01\app\release&gt; adb -s 192.168.0.101:5555 shell pm list packages | Select-String -Pattern &quot;com.example.mitv01&quot;</p><p>package:com.example.mitv01</p><p>//获取com.example.mitv01的文件位置</p><p>PS D:\12_workspace\android_workspace\mitv01\app\release&gt; adb -s 192.168.0.101:5555 shell pm path com.example.mitv01 package:/data/app/com.example.mitv01-KoLN8yVxnDCikI02DeVM9g==/base.apk PS D:\12_workspace\android_workspace\mitv01\app\release&gt;</p><p>//尝试启动应用</p><p>PS D:\12_workspace\android_workspace\mitv01\app\release&gt; adb -s 192.168.0.101:5555 shell am start -n com.example.mitv01/.MainActivity Starting: Intent { cmp=com.example.mitv01/.MainActivity } PS D:\12_workspace\android_workspace\mitv01\app\release&gt;</p><p>//查看应用日志信息</p><p>adb -s 192.168.0.101:5555 logcat | Select-String -Pattern &quot;com.example.mitv01&quot;</p><p>//既然应用能够成功启动，那就说明 APK 文件本身基本是没问题的，之前日志里提到的 <code>Failed to open APK</code> 错误可能是 <code>com.xiaomi.mitv.appstore</code> 在特定操作时产生的临时性问题。</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">最近更新：: </span><time class="meta-item-info" datetime="2025-04-21T07:27:40.000Z" data-allow-mismatch>2025/4/21 15:27</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1806300322@qq.com">syf5sssss</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-D2t_-etO.js" defer></script>
  </body>
</html>
